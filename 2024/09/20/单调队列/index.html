
<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <title>单调队列 | 叫兽の窝</title>
    <link rel="stylesheet" href="/css/dark-mode.css">
    <script src="/js/dark-mode.js"></script>
    

    <meta name="author" content="joso" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link rel="icon" href="/images/avatar.jpg" />
    <canvas id="fireworks" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 32767"></canvas>
    <script src="https://cdn.staticfile.org/animejs/3.2.1/anime.min.js"></script>
    <script src="/js/fireworks.min.js"></script>
    <canvas id="background" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: -1"></canvas>
    <script src="/js/background.min.js"></script>
    <div id="cursor"></div>
    <link rel="stylesheet" href="/css/cursor.min.css">
    <script src="/js/cursor.min.js"></script>
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.cn" />
<link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"
/>
<script> const mixins = {}; </script>

<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>


<script src="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/katex.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/katex.min.css" />
<script src="/js/lib/math.js"></script>


<script src="/js/lib/preview.js"></script>









<link rel="stylesheet" href="/css/main.css" />


    <script src="/js/lib/toc.js"></script>



<script src="https://cdn.staticfile.org/highlight.js/11.8.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.org/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://cdn.staticfile.org/highlight.js/11.8.0/styles/github.min.css"
/>
<link 
    rel="stylesheet"
    id="highlight-style-dark"
    disabled
    href="https://cdn.staticfile.org/highlight.js/11.8.0/styles/github-dark.min.css"
/>
<script src="/js/lib/highlight.js"></script>



    <meta name="msvalidate.01" content="BF22997B7BE5F5F14F0E8845B35BAD3F" />
<script>
        new Darkmode().showWidget();
</script>

<meta name="generator" content="Hexo 7.3.0"></head>
<body>

    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>叫兽の窝</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;主页</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;关于</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;博客</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;分类</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;标签</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;叫兽の窝</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">主页</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">关于</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">博客</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">分类</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">标签</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1>单调队列</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/9/20
        </span>
        
        <span class="category">
            <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                数据结构
            </a>
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <i class="fa-solid fa-tags fa-fw"></i>
            </span>
            
            
            <span class="tag">
                
                <a href="/tags/c-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="color: #ffa2c4">
                    -c++ -数据结构
                </a>
            </span>
            
        </span>
        
    </div>
    
    <!-- <div class="content" v-pre> -->
        <toc-component></toc-component>
        <div class="content" v-pre id="main-content">
        <!--toc-->

<h1><span id="琪露诺">琪露诺</span></h1><p>在幻想乡，琪露诺是以笨蛋闻名的冰之妖精。</p>
<p>某一天，琪露诺又在玩速冻青蛙，就是用冰把青蛙瞬间冻起来。但是这只青蛙比以往的要聪明许多，在琪露诺来之前就已经跑到了河的对岸。于是琪露诺决定到河岸去追青蛙。</p>
<p>小河可以看作一列格子依次编号为 $0$ 到 $N$，琪露诺只能从编号小的格子移动到编号大的格子。而且琪露诺按照一种特殊的方式进行移动，当她在格子 $i$ 时，她只移动到区间 $[i+L,i+R]$ 中的任意一格。你问为什么她这么移动，这还不简单，因为她是笨蛋啊。</p>
<p>每一个格子都有一个冰冻指数 $A_i$，编号为 $0$ 的格子冰冻指数为 $0$。当琪露诺停留在那一格时就可以得到那一格的冰冻指数 $A_i$。琪露诺希望能够在到达对岸时，获取最大的冰冻指数，这样她才能狠狠地教训那只青蛙。</p>
<p>但是由于她实在是太笨了，所以她决定拜托你帮它决定怎样前进。</p>
<p>开始时，琪露诺在编号 $0$ 的格子上，只要她下一步的位置编号大于 $N$ 就算到达对岸。</p>
<h3><span id="样例输入-1">样例输入 #1</span></h3><pre><code>5 2 3
0 12 3 11 7 -2
</code></pre>
<h3><span id="样例输出-1">样例输出 #1</span></h3><pre><code>11
</code></pre>
<pre><code class="c++">#include &lt;bits/stdc++.h&gt;
using namespace std;
#define int long long
#define endl &#39;\n&#39; 
const int N=2e6;
int a[N],dp[N],s[N];
deque&lt;int&gt;dq1,dq2;
int n,h;
deque&lt;int&gt;p;         
void solve()&#123;
    int n,l,r;
    cin&gt;&gt;n&gt;&gt;l&gt;&gt;r;
    for(int i=0;i&lt;=n;i++)&#123;
        cin&gt;&gt;a[i];
    &#125;
    memset(dp,-127,sizeof(dp));
    int j=0;
    dp[0]=0;
    for(int i=l;i&lt;=n;i++)&#123;
        while(j&lt;=i-l)&#123;
            while(!p.empty()&amp;&amp;dp[j]&gt;=dp[p.back()])&#123;
                p.pop_back();
            &#125;
            p.push_back(j);
            j++;
        &#125;
        if(!p.empty()&amp;&amp;p.front()&lt;i-r) p.pop_front();
        dp[i]=dp[p.front()]+a[i];
    &#125;
    int ans=-1e9;
    for(int i=n-r+1;i&lt;=n;i++)&#123;
       ans=max(ans,dp[i]);
    &#125;
    cout&lt;&lt;ans&lt;&lt;endl;

&#125;

signed main() &#123;
    ios::sync_with_stdio(false);
    cin.tie(0);
    cout &lt;&lt; fixed &lt;&lt; setprecision(12);
    int t=1;
    //cin&gt;&gt;t;
    while(t--)&#123;
        solve();
    &#125;
&#125;
</code></pre>
<h1><span id="noip2017-普及组-跳房子">[NOIP2017 普及组] 跳房子</span></h1><p>跳房子，也叫跳飞机，是一种世界性的儿童游戏，也是中国民间传统的体育游戏之一。</p>
<p>跳房子的游戏规则如下：</p>
<p>在地面上确定一个起点，然后在起点右侧画 $n$ 个格子，这些格子都在同一条直线上。每个格子内有一个数字（整数），表示到达这个 格子能得到的分数。玩家第一次从起点开始向右跳，跳到起点右侧的一个格子内。第二次再从当前位置继续向右跳，依此类推。规则规定：</p>
<p>玩家每次都必须跳到当前位置右侧的一个格子内。玩家可以在任意时刻结束游戏，获得的分数为曾经到达过的格子中的数字之和。</p>
<p>现在小 R 研发了一款弹跳机器人来参加这个游戏。但是这个机器人有一个非常严重的缺陷，它每次向右弹跳的距离只能为固定的 $d$。小 R 希望改进他的机器人，如果他花 $g$ 个金币改进他的机器人，那么他的机器人灵活性就能增加 $g$，但是需要注意的是，每 次弹跳的距离至少为 $1$。具体而言，当 $g&lt;d$ 时，他的机器人每次可以选择向右弹跳的距离为 $d-g,d-g+1,d-g+2,\ldots,d+g-1,d+g$；否则当 $g \geq d$ 时，他的机器人每次可以选择向右弹跳的距离为 $1,2,3,\ldots,d+g-1,d+g$。</p>
<p>现在小 R 希望获得至少 $k$ 分，请问他至少要花多少金币来改造他的机器人。</p>
<p>若无论如何他都无法获得至少 $k$ 分，输出 $-1$。</p>
<h3><span id="样例输入-1">样例输入 #1</span></h3><pre><code>7 4 10
2 6
5 -3
10 3
11 -3
13 1
17 6
20 2
</code></pre>
<h3><span id="样例输出-1">样例输出 #1</span></h3><pre><code>2
</code></pre>
<pre><code class="c++">#include &lt;bits/stdc++.h&gt;
using namespace std;
#define int long long
#define endl &#39;\n&#39; 
const int N=2e6;
int n,d,k;
int x[N],s[N];
int dp[N];
deque&lt;int&gt;p;         
bool check(int mid)&#123;
    memset(dp,-127,sizeof(dp));
    p.clear();
    int l=max((int)1,d-mid);
    int r=min(d+mid,x[n]);
    int idx=0;
    int num=0;
    dp[0]=0;
    for(int i=1;i&lt;=n;i++)&#123;
        if(x[i]&gt;=l&amp;&amp;x[i]&lt;=r)&#123;
            idx=i;
            dp[idx]=s[idx];
            num=dp[idx];
            break;
        &#125;
    &#125;
    if(idx==0) return 0;
    for(int i=2;i&lt;=n;i++)&#123;
        while(x[idx]&lt;=x[i]-l)&#123;
            while(!p.empty()&amp;&amp;dp[idx]&gt;=dp[p.back()])&#123;
                p.pop_back();
            &#125;
            p.push_back(idx);
            idx++;
        &#125;
        while(!p.empty()&amp;&amp;x[p.front()]&lt;x[i]-r) p.pop_front();
        if(!p.empty())
            dp[i]=dp[p.front()]+s[i];
        num=max(num,dp[i]);
    &#125;
    if(num&gt;=k) return 1;
    else return 0;
&#125;
void solve()&#123;
    cin&gt;&gt;n&gt;&gt;d&gt;&gt;k;
    for(int i=1;i&lt;=n;i++)&#123;
        cin&gt;&gt;x[i]&gt;&gt;s[i];
    &#125;
    int l=0;
    int r=1e9;
    while(l&lt;r)&#123;
        int mid=l+r&gt;&gt;1;
        if(check(mid)) r=mid;
        else l=mid+1;
    &#125;
    if(l&gt;=1e9) l=-1;
    cout&lt;&lt;l&lt;&lt;endl;
&#125;

signed main() &#123;
    ios::sync_with_stdio(false);
    cin.tie(0);
    cout &lt;&lt; fixed &lt;&lt; setprecision(12);
    int t=1;
    while(t--)&#123;
        solve();
    &#125;
&#125;
</code></pre>
<h1><span id="切蛋糕">切蛋糕</span></h1><p>今天是小 Z 的生日，同学们为他带来了一块蛋糕。这块蛋糕是一个长方体，被用不同色彩分成了 $n$ 个相同的小块，每小块都有对应的幸运值。</p>
<p>小 Z 作为寿星，自然希望吃到的蛋糕的幸运值总和最大，但小 Z 最多又只能吃 $m(m\le n)$ 小块的蛋糕。</p>
<p>请你帮他从这 $n$ 小块中找出<strong>连续</strong>的 $k(1 \le k\le m)$ 块蛋糕，使得其上的总幸运值最大。</p>
<p><strong>形式化地</strong>，在数列 ${p_n}$ 中，找出一个子段 $[l,r](r-l+1\le m)$，最大化 $\sum\limits_{i&#x3D;l}^rp_i$。</p>
<h3><span id="样例输入-1">样例输入 #1</span></h3><pre><code>5 2
1 2 3 4 5
</code></pre>
<h3><span id="样例输出-1">样例输出 #1</span></h3><pre><code>9
</code></pre>
<pre><code class="c++">#include &lt;bits/stdc++.h&gt;
using namespace std;
#define int long long
#define endl &#39;\n&#39; 
const int N=2e6;
int a[N],dp[N],s[N];
deque&lt;int&gt;dq1,dq2;
int n,h;
deque&lt;int&gt;p;         
void solve()&#123;
   int n,m;
   cin&gt;&gt;n&gt;&gt;m;
   int ans=0;
   for(int i=1;i&lt;=n;i++)&#123;
       cin&gt;&gt;a[i];
       s[i]=s[i-1]+a[i];
    &#125;
    int j=1;
    for(int i=1;i&lt;=n;i++)&#123;
        while(j&lt;=min(i+m-1,n))&#123;
            while(!p.empty()&amp;&amp;s[j]&gt;=s[p.back()])&#123;
                p.pop_back();
            &#125;
            p.push_back(j);
            j++;
        &#125;
        if(p.front()&lt;i) p.pop_front();
        ans=max(ans,s[p.front()]-s[i-1]);
    &#125;
    cout&lt;&lt;ans&lt;&lt;endl;
&#125;

signed main() &#123;
    ios::sync_with_stdio(false);
    cin.tie(0);
    cout &lt;&lt; fixed &lt;&lt; setprecision(12);
    int t=1;
    //cin&gt;&gt;t;
    while(t--)&#123;
        solve();
    &#125;
&#125;
</code></pre>

    </div>
    
    
    
    
    <div id="comment">
        <div id="giscus-container" class="giscus"></div>
    </div>
    
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2025 叫兽の窝
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;joso
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
    
<script
    src="https://giscus.app/client.js"
    data-repo=""
    data-repo-id=""
    data-category=""
    data-category-id=""
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="preferred_color_scheme"
    data-lang=""
    crossorigin
    async
></script>





    
</body>
<script src="https://giscus.app/client.js"
        data-repo="joso233/remark"
        data-repo-id="R_kgDOMqyotg"
        data-category="Announcements"
        data-category-id="DIC_kwDOMqyots4CiGn3"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
 </script>
</html>
