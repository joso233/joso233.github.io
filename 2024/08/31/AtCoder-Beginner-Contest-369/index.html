
<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <title>AtCoder Beginner Contest 369 | 叫兽の窝</title>
    <meta name="author" content="joso" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link rel="icon" href="/images/avatar.jpg" />
    <canvas id="fireworks" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 32767"></canvas>
    <script src="https://cdn.staticfile.org/animejs/3.2.1/anime.min.js"></script>
    <script src="/js/fireworks.min.js"></script>
    <canvas id="background" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: -1"></canvas>
    <script src="/js/background.min.js"></script>
    <div id="cursor"></div>
    <link rel="stylesheet" href="/css/cursor.min.css">
    <script src="/js/cursor.min.js"></script>
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.cn" />
<link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"
/>
<script> const mixins = {}; </script>

<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>


<script src="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/katex.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/katex.min.css" />
<script src="/js/lib/math.js"></script>


<script src="/js/lib/preview.js"></script>









<link rel="stylesheet" href="/css/main.css" />

<script src="https://cdn.staticfile.org/highlight.js/11.8.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.org/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://cdn.staticfile.org/highlight.js/11.8.0/styles/github.min.css"
/>
<link 
    rel="stylesheet"
    id="highlight-style-dark"
    disabled
    href="https://cdn.staticfile.org/highlight.js/11.8.0/styles/.min.css"
/>
<script src="/js/lib/highlight.js"></script>



    <meta name="msvalidate.01" content="BF22997B7BE5F5F14F0E8845B35BAD3F" />
<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>叫兽の窝</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;主页</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;关于</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;博客</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;分类</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;标签</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;叫兽の窝</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">主页</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">关于</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">博客</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">分类</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">标签</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1>AtCoder Beginner Contest 369</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/8/31
        </span>
        
        <span class="category">
            <a href="/categories/%E9%A2%98%E8%A7%A3/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                题解
            </a>
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <i class="fa-solid fa-tags fa-fw"></i>
            </span>
            
            
            <span class="tag">
                
                <a href="/tags/atcoder-C/" style="color: #00a596">
                    -atcoder -C++
                </a>
            </span>
            
        </span>
        
    </div>
    
    <div class="content" v-pre>
        <!-- toc -->

<ul>
<li><a href="#a-369"><strong>A - 369</strong></a><ul>
<li><a href="#%E9%97%AE%E9%A2%98%E9%99%88%E8%BF%B0">问题陈述</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0">实现</a></li>
</ul>
</li>
<li><a href="#b-piano-3"><strong>B - Piano 3</strong></a><ul>
<li><a href="#%E9%97%AE%E9%A2%98%E9%99%88%E8%BF%B0-1">问题陈述</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0-1">实现</a></li>
</ul>
</li>
<li><a href="#c-count-arithmetic-subarrays"><strong>C - Count Arithmetic Subarrays</strong></a><ul>
<li><a href="#%E9%97%AE%E9%A2%98%E9%99%88%E8%BF%B0-2">问题陈述</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0-2">实现</a></li>
</ul>
</li>
<li><a href="#d-bonus-exp"><strong>D - Bonus EXP</strong></a><ul>
<li><a href="#%E9%97%AE%E9%A2%98%E9%99%88%E8%BF%B0-3">问题陈述</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0-3">实现</a></li>
</ul>
</li>
<li><a href="#e-sightseeing-tour"><strong>E - Sightseeing Tour</strong></a><ul>
<li><a href="#%E9%97%AE%E9%A2%98%E9%99%88%E8%BF%B0-4">问题陈述</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0-4">实现</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="a-369"><strong>A - 369</strong></span></h1><h2><span id="问题陈述">问题陈述</span></h2><p>给你两个整数 $A$ 和 $B$ 。</p>
<p>有多少个整数 $x$ 满足以下条件？</p>
<ul>
<li>条件：可以将三个整数 $A$ 、 $B$ 和 $x$ 按一定顺序排列，组成一个算术序列。</li>
</ul>
<p>当且仅当 $q-p$ 等于 $r-q$ 时，三个整数 $p$ ， $q$ 和 $r$ 按此顺序排列的序列是算术序列。</p>
<h2><span id="实现">实现</span></h2><pre><code class="c++">#include&lt;bits/stdc++.h&gt;
using namespace std;
#define int long long
const int N=2e5;
void solve()
&#123;
   int a,b;
   cin&gt;&gt;a&gt;&gt;b;
   if(a==b)
   &#123;
         cout&lt;&lt;1&lt;&lt;endl;
         return ;
   &#125;
   if(abs(b-a)%2==0) cout&lt;&lt;3&lt;&lt;endl;
   else cout&lt;&lt;2&lt;&lt;endl;
&#125;
signed main()
&#123;
    int t=1;
    while(t--)
    &#123;
        solve();
    &#125;
&#125;
</code></pre>
<h1><span id="b-piano-3"><strong>B - Piano 3</strong></span></h1><h2><span id="问题陈述">问题陈述</span></h2><p>高桥有一架钢琴，上面有 $100$ 个排成一行的琴键。从左边开始的第 $i$ 个键叫做 $i$ 键。</p>
<p>他要逐个按下 $N$ 个键来演奏音乐。在按下 $i$ &#x2F;th键时，他将用左手按下 $A_i$ 键，如果是 $S_i&#x3D;$ ，则用右手按下 $A_i$ 键。如果按 $S_i&#x3D;$ 则用左手，如果按 $S_i&#x3D;$ 则用右手。<code>R</code>.</p>
<p>开始演奏前，他可以将双手放在任意键上，此时他的<strong>疲劳度</strong>为 0。在演奏过程中，如果他将一只手从键 $x$ 移动到键 $y$ ，疲劳度会增加 $|y-x|$ （反之，除移动双手外，疲劳度不会增加）。用手按下某个键时，该手必须放在该键上。</p>
<p>找出表演结束时可能的最低疲劳度。</p>
<h2><span id="实现">实现</span></h2><p>简单模拟即可</p>
<pre><code>#include&lt;bits/stdc++.h&gt;
using namespace std;
#define int long long
const int N=2e5;
void solve()
&#123;
   int n;
   cin&gt;&gt;n;
   int l=0;
   int r=0;
   int ans=0;
   for(int i=1;i&lt;=n;i++)
   &#123;
        int x;
        char ch;
        cin&gt;&gt;x&gt;&gt;ch;
        if(ch==&#39;L&#39;) 
        &#123;
            if(l==0) l=x;
            else ans+=(abs(l-x)),l=x;
        &#125;
        else
        &#123;
            if(r==0) r=x;
            else ans+=(abs(r-x)),r=x;
        &#125;
   &#125;
   cout&lt;&lt;ans&lt;&lt;endl;
&#125;
signed main()
&#123;
    int t=1;
    //cin&gt;&gt;t;
    while(t--)
    &#123;
        solve();
    &#125;
&#125;
</code></pre>
<h1><span id="c-count-arithmetic-subarrays"><strong>C - Count Arithmetic Subarrays</strong></span></h1><h2><span id="问题陈述">问题陈述</span></h2><p>给你一个由 $N$ 个正整数 $A&#x3D;(A_1,A_2,\dots,A_N)$ 组成的序列。</p>
<p>求满足 $1\leq l\leq r\leq N$ 的一对整数 $(l,r)$ 中，子序列 $(A_l,A_{l+1},\dots,A_r)$ 构成算术级数的个数。</p>
<p>当且仅当存在一个 $d$ 使得 $x_{i+1}-x_i&#x3D;d\ (1\leq i &lt; |x|)$ 是算术级数时，序列 $(x_1,x_2,\dots,x_{|x|})$ 才是算术级数。特别地，长度为 $1$ 的序列总是算术级数。</p>
<h2><span id="实现">实现</span></h2><pre><code>#include&lt;bits/stdc++.h&gt;
using namespace std;
#define int long long
const int N=2e5;
int a[N];
int b[N];
void solve()
&#123;
   int n;
   cin&gt;&gt;n;
   for(int i=1;i&lt;=n;i++) cin&gt;&gt;a[i];
   for(int i=1;i&lt;n;i++)
   &#123;
        b[i]=(a[i+1]-a[i]);
   &#125;
   int r=1;
   int ans=n;
   for(int l=1;l&lt;n;l++)
   &#123;
        while(b[r+1]==b[l]&amp;&amp;r+1&lt;n) r++;
        int num=r-l+1;
        //cout&lt;&lt;num&lt;&lt;&#39; &#39;;
        ans+=(num)*(num+1)/2;
        l=r;
   &#125;
   cout&lt;&lt;ans&lt;&lt;endl;
&#125;
signed main()
&#123;
    int t=1;
    while(t--)
    &#123;
        solve();
    &#125;
&#125;
</code></pre>
<h1><span id="d-bonus-exp"><strong>D - Bonus EXP</strong></span></h1><h2><span id="问题陈述">问题陈述</span></h2><p>高桥将依次遇到 $N$ 只怪物。 $i$ 个怪物 $(1\leq i\leq N)$ 的力量为 $A &#95; i$ 。</p>
<p>对于每只怪物，他都可以选择放走或打败它。<br>每次行动都会获得以下经验值：</p>
<ul>
<li>如果放走怪物，他将获得 $0$ 点经验值。</li>
<li>如果他以 $X$ 的力量击败了怪物，则会获得 $X$ 点经验值。<br>  如果击败的是偶数怪物(第 2 个、第 4 个……)，他将额外获得 $X$ 点经验值。</li>
</ul>
<p>求他能从 $N$ 个怪物身上获得的经验值上限。</p>
<h2><span id="实现">实现</span></h2><pre><code class="c++">#include&lt;bits/stdc++.h&gt;
using namespace std;
#define int long long
const int N=2e5;
int a[N];
int b[N];
int dp[N][2][2];
void solve()
&#123;
   int n;
   cin&gt;&gt;n;
   for(int i=1;i&lt;=n;i++) cin&gt;&gt;a[i];
   for(int i=1;i&lt;=n;i++)
   &#123;
        dp[i][0][1]=max(dp[i-1][0][1],dp[i-1][1][1]);
        dp[i][0][0]=max(dp[i-1][0][0],dp[i-1][1][0]);
        dp[i][1][1]=max(dp[i-1][1][0],dp[i-1][0][0])+a[i];
        if(i==1) continue;
        dp[i][1][0]=max(dp[i-1][1][1],dp[i-1][0][1])+2*a[i];
   &#125;
   cout&lt;&lt;max(dp[n][1][0],dp[n][1][1])&lt;&lt;endl;
&#125;
signed main()
&#123;
    int t=1;
    //cin&gt;&gt;t;
    while(t--)
    &#123;
        solve();
    &#125;
&#125;
</code></pre>
<h1><span id="e-sightseeing-tour"><strong>E - Sightseeing Tour</strong></span></h1><h2><span id="问题陈述">问题陈述</span></h2><p>有 $N$ 个岛屿和 $M$ 座双向桥梁连接两个岛屿。这些岛屿和桥梁的编号分别为 $1$ 、 $2$ 、 $\ldots$ 、 $N$ 和 $1$ 、 $2$ 、 $\ldots$ 、 $M$ 。<br>大桥 $i$ 连接着岛屿 $U_i$ 和 $V_i$ ，从任一方向穿过大桥所需的时间为 $T_i$ 。<br>没有一座桥将一个岛屿与它自己连接起来，但是有可能两座岛屿被不止一座桥直接连接起来。<br>人们可以通过一些桥梁来往于任意两个岛屿之间。</p>
<p>给你 $Q$ 个问题，请逐一回答。 $i$ -th 查询如下：</p>
<blockquote>
<p>给出了 $K_i$ 个不同的桥：桥 $B_{i,1}, B_{i,2}, \ldots, B_{i,K_i}$ 。<br>求从岛屿 $1$ 到岛屿 $N$ 所需的最少时间，每座桥梁至少使用一次。<br>只考虑过桥的时间。<br>你可以以任何顺序和方向通过给定的桥梁。</p>
</blockquote>
<h2><span id="实现">实现</span></h2><p>​	求n遍dijkstral算出各点间的最短路，接着通过全排列枚举必走k个不同桥的走法，要注意不止枚举桥的顺序，还要枚举从u到v还是从v到u，每架桥对应两种状态，因此用01表示，则共2的k次方种选法。</p>
<p>​	dist[i] [j]表示从上一次走的桥的出口在i，要走到这一次桥的入口j，当选择的是第一架桥时，从1号点出发，到达第x&#x3D;1架桥的入口,下次循x&#x3D;2时则要选择从x-1出发，走到x,表示为dist[b[x-1]] [b[x]],所以最后一架桥作为出口时，此时循环了x&#x3D;k+1次，表示为dist[b[k]] [n]到达n号点</p>
<pre><code class="c++">#include&lt;bits/stdc++.h&gt;
using namespace std;
#define int long long
const int N=2e3;
const int M=2e5+10;
int u[M],v[M],w[M];
int dist[N][N];
vector&lt;int&gt;e[M];
bool st[N][N];
int b[M];
typedef pair&lt;int,int&gt; PII;

void dijkstra(int root)
&#123;
    priority_queue&lt;PII, vector&lt;PII&gt;, greater&lt;PII&gt;&gt;heap;
    dist[root][root]=0;
    heap.push(&#123;0,root&#125;);
    while(heap.size())
    &#123;
        auto k=heap.top();
        heap.pop();
        int ver=k.second;
        int distence=k.first;
        if(st[root][ver]) continue;
        st[root][ver]=1;
        for(int i=0;i&lt;e[ver].size();i++)
        &#123;
            if(dist[root][e[ver][i]]&gt;=distence+dist[ver][e[ver][i]])
            &#123;
                dist[root][e[ver][i]]=distence+dist[ver][e[ver][i]];
                heap.push(&#123;dist[root][e[ver][i]],e[ver][i]&#125;);
            &#125;
        &#125;
    &#125;
&#125;
void solve()
&#123;
    int n,m;
    cin&gt;&gt;n&gt;&gt;m;
    memset(dist,127,sizeof(dist));
    for(int i=1;i&lt;=m;i++)
    &#123;
        cin&gt;&gt;u[i]&gt;&gt;v[i]&gt;&gt;w[i];
        if(!st[u[i]][v[i]])
        &#123;
            st[u[i]][v[i]]=1;
            st[v[i]][u[i]]=1;
            e[u[i]].push_back(v[i]);
            e[v[i]].push_back(u[i]);
        &#125;
        dist[u[i]][v[i]]=min(dist[u[i]][v[i]],w[i]);
        dist[v[i]][u[i]]=min(dist[v[i]][u[i]],w[i]);
    &#125;
    memset(st,0,sizeof(st));
    for(int i=1;i&lt;=n;i++)
    &#123;
        dijkstra(i);
    &#125;
    int q;
    cin&gt;&gt;q;
    while(q--)
    &#123;
        int k;
        cin&gt;&gt;k;
        for(int i=1;i&lt;=k;i++) cin&gt;&gt;b[i];
        sort(b+1,b+1+k);
        int ans=1e12;
        do
        &#123;
            for(int j=0;j&lt;1&lt;&lt;k;j++)
            &#123;
                int cur=0;
                for(int i=1;i&lt;=k;i++)cur+=w[b[i]];
                for(int i=1;i&lt;=k+1;i++)cur+=dist[i==1?1:(j&gt;&gt;i-2)&amp;1?v[b[i-1]]:u[b[i-1]]][i&gt;k?n:(j&gt;&gt;i-1)&amp;1?u[b[i]]:v[b[i]]];
                ans=min(ans,cur);
            &#125;
        &#125; while (next_permutation(b+1,b+1+k));
        cout&lt;&lt;ans&lt;&lt;endl;
    &#125;   
&#125;
signed main()
&#123;
    int t=1;
    //cin&gt;&gt;t;
    while(t--)
    &#123;
        solve();
    &#125;
&#125;
</code></pre>

    </div>
    
    
    
    
    <div id="comment">
        <div id="giscus-container" class="giscus"></div>
    </div>
    
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2024 叫兽の窝
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;joso
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
    
<script
    src="https://giscus.app/client.js"
    data-repo=""
    data-repo-id=""
    data-category=""
    data-category-id=""
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="preferred_color_scheme"
    data-lang=""
    crossorigin
    async
></script>





    
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hibiki.model.json"},"display":{"position":"left","width":150,"height":350},"mobile":{"show":true},"react":{"opacity":0.7},"dialog":{"enable":true,"hitokoto":true},"log":false});</script></body>
// <script src="https://giscus.app/client.js"
//         data-repo="joso233/remark"
//         data-repo-id="R_kgDOMqyotg"
//         data-category="Announcements"
//         data-category-id="DIC_kwDOMqyots4CiGn3"
//         data-mapping="title"
//         data-strict="0"
//         data-reactions-enabled="1"
//         data-emit-metadata="0"
//         data-input-position="top"
//         data-theme="light"
//         data-lang="zh-CN"
//         data-loading="lazy"
//         crossorigin="anonymous"
//         async>
// </script>
</html>
